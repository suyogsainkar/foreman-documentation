[id="creating-a-webhook_{context}"]
= Creating a Webhook

.Procedure

. In the {Project} web UI, click *Administer* > *Webhooks*.
. Click *Create Webhook*.
. Click *Subscribe to field* to reveal list of available events.
. Select an event from the list.
. Enter a name.
. Enter a target URL. When using shellhooks plugin, the URL should be in the form of `https://{smartproxy.example.com}:{smartproxy_port}/shellhooks/my_script`.
. Click *Template* to see the list of available templates.
. Select a template from the list.
. Enter a HTTP method.
. Ensure that the *Enabled* flag is checked if you want to create active webhook.

In the Credentials tab:

. Optional: Enter user and password when HTTP authentication is required. Do not enter anything when using shellhooks.
. Select *Verify SSL* if the server certificate should be verified against the system certificate store or Foreman CA. When using shellhooks, ensure this flag is selected.
. Select *Proxy Authorization* when using shellhooks, otherwise deselect this box.
. Optional: Provide one or more CA certificates in the X509 Certification Authorities. Keep the field blank when using shellhooks.

In the Additional tab:

. Enter HTTP Content Type, typically application/json, application/xml or text/plain depending on the payload.
. Optional: Provide HTTP headers as JSON. ERB is allowed and the same macros and variables are available as in webhook templates.

When configuring webhooks with endpoints with non-standard HTTP(s) ports, SELinux port must be assigned, see <>. 

.Example HTTP headers

To pass arguments into a shellhook script, create the following HTTP headers:

[options="nowrap" subs="+quotes,attributes"]
----
{
  "X-Shellhook-Arg-1": "<%= @object.content_view_version_id %>,
  "X-Shellhook-Arg-2": "<%= @object.content_view_name %>
}
----

Ensure the content renders to a valid JSON. Also, only pass safe fields like database ID, name or labels which do not include new lines or quote characters.

